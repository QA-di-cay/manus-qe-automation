# 🧪 Manus QE Automation - BrowserStack Integration Setup

## 📋 Overview

This setup allows you to run tests locally while generating reports that can be shared with your team through BrowserStack-style reporting.

## 🚀 Quick Setup

### 1. Run Setup Script
```bash
./setup-local-testing.sh
```

### 2. Configure Environment
Update `.env` file with your credentials:
```bash
# BrowserStack Configuration (optional for local testing)
BROWSERSTACK_USERNAME=your_username
BROWSERSTACK_ACCESS_KEY=your_access_key
BROWSERSTACK_PROJECT_NAME=Manus QE Automation
BROWSERSTACK_BUILD_NAME=Local-Build-$(date +%Y%m%d-%H%M%S)

# Test Environment
ENV_NAME="dev-staging"
BASE_URL="https://dev-staging.transportme.com.au"
ADMIN_USERNAME="your_username"
ADMIN_PASSWORD="your_password"
ADMIN_MFA_SECRET="your_mfa_secret"
```

## 🎯 Running Tests

### Local Testing with Enhanced Reporting
```bash
# Run all settings tests with BrowserStack-style reporting
npm run test:settings:report

# Run specific test suites
npm run test:geofenceRange:report
npm run test:ptbReport:report

# Run all tests
npm run test:local:report
```

### Standard Local Testing
```bash
# Run tests normally (without BrowserStack reporting)
npm run test:settings
npm run test:geofenceRange
npm run test:ptbReport
```

## 📊 Generated Reports

After running tests with `:report` suffix, you'll get:

### 1. Standard Playwright Report
- **Location:** `playwright-report/index.html`
- **Features:** Interactive HTML report with test details, screenshots, videos

### 2. BrowserStack-Style Report
- **Location:** `browserstack-report.html`
- **Features:** Custom formatted report mimicking BrowserStack UI

### 3. Public Shareable Report
- **Location:** `public-report.html`
- **Features:** Clean, shareable report for team members

## 🔧 Configuration Files

### `playwright.browserstack.config.ts`
Enhanced Playwright configuration with:
- Multiple report formats (HTML, JSON, JUnit)
- Custom BrowserStack reporter
- Enhanced screenshot/video capture
- Trace collection on failures

### `src/reporters/browserstack-reporter.ts`
Custom reporter that:
- Collects test results during execution
- Generates BrowserStack-style HTML reports
- Simulates report upload to BrowserStack
- Provides detailed test statistics

## 📁 Directory Structure

```
manus-qe-automation/
├── src/
│   └── reporters/
│       └── browserstack-reporter.ts    # Custom reporter
├── test-results/                       # Test artifacts
├── playwright-report/                  # Standard HTML reports
├── playwright.browserstack.config.ts   # BrowserStack config
├── .env.browserstack                   # Environment template
└── setup-local-testing.sh             # Setup script
```

## 🎨 Report Features

### Test Statistics Dashboard
- Total tests executed
- Pass/Fail/Skip counts
- Test duration metrics
- Visual status indicators

### Detailed Test Results
- Individual test outcomes
- Error messages for failed tests
- Screenshot attachments
- Execution timestamps

### Team Sharing
- Shareable HTML reports
- No login required to view
- Mobile-friendly responsive design
- Professional BrowserStack-style UI

## 🔍 Troubleshooting

### Common Issues

1. **Tests not running**
   ```bash
   # Reinstall Playwright browsers
   npx playwright install --with-deps
   ```

2. **Environment variables not loaded**
   ```bash
   # Check .env file exists and has correct format
   cat .env
   ```

3. **Reports not generating**
   ```bash
   # Check permissions on output directories
   mkdir -p test-results playwright-report
   ```

### Debug Mode
```bash
# Run with debug output
DEBUG=pw:api npm run test:settings:report
```

## 🚀 Advanced Usage

### Custom Build Names
```bash
# Set custom build name
export BROWSERSTACK_BUILD_NAME="Feature-Branch-$(date +%Y%m%d)"
npm run test:settings:report
```

### Parallel Execution
```bash
# Run with more workers
npx playwright test --config=playwright.browserstack.config.ts --workers=4
```

### Specific Test Files
```bash
# Run specific test file with reporting
npx playwright test tests/operatorPortal/settings/geofenceRange.spec.ts --config=playwright.browserstack.config.ts
```

## 📞 Support

For issues with this setup:
1. Check the generated reports in `playwright-report/`
2. Review console output for error messages
3. Verify environment configuration in `.env`
4. Ensure all dependencies are installed with `npm install`

---
*Generated by Manus QE Automation Framework*
